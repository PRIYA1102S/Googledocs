{"ast":null,"code":"import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\nexport const downloadDocumentAsPDF = async document => {\n  try {\n    // Create a temporary container for rendering\n    const container = document.createElement('div');\n    container.style.width = '210mm'; // A4 width\n    container.style.padding = '20mm';\n    container.style.backgroundColor = 'white';\n    container.style.fontFamily = 'Arial, sans-serif';\n\n    // Add title\n    const title = document.createElement('h1');\n    title.textContent = document.title;\n    title.style.marginBottom = '20px';\n    container.appendChild(title);\n\n    // Render content blocks\n    document.content.forEach(block => {\n      if (block.type === 'text') {\n        const textDiv = document.createElement('div');\n        textDiv.innerHTML = block.content;\n        textDiv.style.marginBottom = '10px';\n        container.appendChild(textDiv);\n      } else if (block.type === 'image') {\n        const img = document.createElement('img');\n        img.src = block.src;\n        img.alt = block.alt || '';\n        img.style.maxWidth = '100%';\n        img.style.marginBottom = '10px';\n        container.appendChild(img);\n      }\n    });\n\n    // Temporarily add to DOM\n    container.style.position = 'absolute';\n    container.style.left = '-9999px';\n    document.body.appendChild(container);\n\n    // Convert to canvas\n    const canvas = await html2canvas(container, {\n      scale: 2,\n      useCORS: true,\n      allowTaint: true\n    });\n\n    // Remove from DOM\n    document.body.removeChild(container);\n\n    // Create PDF\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgData = canvas.toDataURL('image/png');\n    const pdfWidth = pdf.internal.pageSize.getWidth();\n    const pdfHeight = canvas.height * pdfWidth / canvas.width;\n    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\n\n    // Download\n    pdf.save(`${document.title || 'document'}.pdf`);\n    return true;\n  } catch (error) {\n    console.error('Error downloading PDF:', error);\n    throw new Error('Failed to download document');\n  }\n};","map":{"version":3,"names":["jsPDF","html2canvas","downloadDocumentAsPDF","document","container","createElement","style","width","padding","backgroundColor","fontFamily","title","textContent","marginBottom","appendChild","content","forEach","block","type","textDiv","innerHTML","img","src","alt","maxWidth","position","left","body","canvas","scale","useCORS","allowTaint","removeChild","pdf","imgData","toDataURL","pdfWidth","internal","pageSize","getWidth","pdfHeight","height","addImage","save","error","console","Error"],"sources":["D:/Docs-MERN/google-docs-clone/frontend/src/services/downloadService.js"],"sourcesContent":["import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nexport const downloadDocumentAsPDF = async (document) => {\n  try {\n    // Create a temporary container for rendering\n    const container = document.createElement('div');\n    container.style.width = '210mm'; // A4 width\n    container.style.padding = '20mm';\n    container.style.backgroundColor = 'white';\n    container.style.fontFamily = 'Arial, sans-serif';\n    \n    // Add title\n    const title = document.createElement('h1');\n    title.textContent = document.title;\n    title.style.marginBottom = '20px';\n    container.appendChild(title);\n    \n    // Render content blocks\n    document.content.forEach(block => {\n      if (block.type === 'text') {\n        const textDiv = document.createElement('div');\n        textDiv.innerHTML = block.content;\n        textDiv.style.marginBottom = '10px';\n        container.appendChild(textDiv);\n      } else if (block.type === 'image') {\n        const img = document.createElement('img');\n        img.src = block.src;\n        img.alt = block.alt || '';\n        img.style.maxWidth = '100%';\n        img.style.marginBottom = '10px';\n        container.appendChild(img);\n      }\n    });\n    \n    // Temporarily add to DOM\n    container.style.position = 'absolute';\n    container.style.left = '-9999px';\n    document.body.appendChild(container);\n    \n    // Convert to canvas\n    const canvas = await html2canvas(container, {\n      scale: 2,\n      useCORS: true,\n      allowTaint: true\n    });\n    \n    // Remove from DOM\n    document.body.removeChild(container);\n    \n    // Create PDF\n    const pdf = new jsPDF('p', 'mm', 'a4');\n    const imgData = canvas.toDataURL('image/png');\n    \n    const pdfWidth = pdf.internal.pageSize.getWidth();\n    const pdfHeight = (canvas.height * pdfWidth) / canvas.width;\n    \n    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);\n    \n    // Download\n    pdf.save(`${document.title || 'document'}.pdf`);\n    \n    return true;\n  } catch (error) {\n    console.error('Error downloading PDF:', error);\n    throw new Error('Failed to download document');\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}