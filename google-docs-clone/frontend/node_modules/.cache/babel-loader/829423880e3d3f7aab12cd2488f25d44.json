{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { loginUser, registerUser } from '../services/userService';\nconst useAuth = () => {\n  _s();\n  const {\n    user,\n    isAuthenticated,\n    setUser,\n    setIsAuthenticated\n  } = useContext(AuthContext);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const res = await fetch('/api/auth/check', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        const data = await res.json();\n        if (res.ok && data.user) {\n          setUser(data.user);\n          setIsAuthenticated(true);\n        } else {\n          setIsAuthenticated(false);\n        }\n      } catch (err) {\n        setError(err);\n        setIsAuthenticated(false);\n      } finally {\n        setLoading(false);\n      }\n    };\n    checkAuth();\n  }, [setUser, setIsAuthenticated]);\n  const handleLogin = async credentials => {\n    setLoading(true);\n    try {\n      const {\n        user,\n        token\n      } = await loginUser(credentials);\n      localStorage.setItem('token', token);\n      setUser(user);\n      setIsAuthenticated(true);\n    } catch (err) {\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleRegister = async userData => {\n    setLoading(true);\n    try {\n      const {\n        user,\n        token\n      } = await registerUser(userData);\n      localStorage.setItem('token', token);\n      setUser(user);\n      setIsAuthenticated(true);\n    } catch (err) {\n      setError(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    loading,\n    error,\n    handleLogin,\n    handleRegister\n  };\n};\n_s(useAuth, \"S8XmhLRNWtSfUwJ+lZAS3IHnGrQ=\");\nexport default useAuth;","map":{"version":3,"names":["useState","useEffect","useContext","AuthContext","loginUser","registerUser","useAuth","_s","user","isAuthenticated","setUser","setIsAuthenticated","loading","setLoading","error","setError","checkAuth","res","fetch","headers","Authorization","localStorage","getItem","data","json","ok","err","handleLogin","credentials","token","setItem","handleRegister","userData"],"sources":["D:/Docs-MERN/google-docs-clone/frontend/src/hooks/useAuth.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../contexts/AuthContext';\nimport { loginUser, registerUser } from '../services/userService';\n\nconst useAuth = () => {\n    const { user, isAuthenticated, setUser, setIsAuthenticated } = useContext(AuthContext);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const checkAuth = async () => {\n            try {\n                const res = await fetch('/api/auth/check', {\n                    headers: {\n                        Authorization: `Bearer ${localStorage.getItem('token')}`,\n                    },\n                });\n                const data = await res.json();\n                if (res.ok && data.user) {\n                    setUser(data.user);\n                    setIsAuthenticated(true);\n                } else {\n                    setIsAuthenticated(false);\n                }\n            } catch (err) {\n                setError(err);\n                setIsAuthenticated(false);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        checkAuth();\n    }, [setUser, setIsAuthenticated]);\n\n    const handleLogin = async (credentials) => {\n        setLoading(true);\n        try {\n            const { user, token } = await loginUser(credentials);\n            localStorage.setItem('token', token);\n            setUser(user);\n            setIsAuthenticated(true);\n        } catch (err) {\n            setError(err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleRegister = async (userData) => {\n        setLoading(true);\n        try {\n            const { user, token } = await registerUser(userData);\n            localStorage.setItem('token', token);\n            setUser(user);\n            setIsAuthenticated(true);\n        } catch (err) {\n            setError(err);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return {\n        loading,\n        error,\n        handleLogin,\n        handleRegister,\n    };\n};\n\nexport default useAuth;\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AACvD,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,SAAS,EAAEC,YAAY,QAAQ,yBAAyB;AAEjE,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAM;IAAEC,IAAI;IAAEC,eAAe;IAAEC,OAAO;IAAEC;EAAmB,CAAC,GAAGT,UAAU,CAACC,WAAW,CAAC;EACtF,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACc,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACZ,MAAMe,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,IAAI;QACA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,iBAAiB,EAAE;UACvCC,OAAO,EAAE;YACLC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UAC1D;QACJ,CAAC,CAAC;QACF,MAAMC,IAAI,GAAG,MAAMN,GAAG,CAACO,IAAI,CAAC,CAAC;QAC7B,IAAIP,GAAG,CAACQ,EAAE,IAAIF,IAAI,CAACf,IAAI,EAAE;UACrBE,OAAO,CAACa,IAAI,CAACf,IAAI,CAAC;UAClBG,kBAAkB,CAAC,IAAI,CAAC;QAC5B,CAAC,MAAM;UACHA,kBAAkB,CAAC,KAAK,CAAC;QAC7B;MACJ,CAAC,CAAC,OAAOe,GAAG,EAAE;QACVX,QAAQ,CAACW,GAAG,CAAC;QACbf,kBAAkB,CAAC,KAAK,CAAC;MAC7B,CAAC,SAAS;QACNE,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IAEDG,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,CAACN,OAAO,EAAEC,kBAAkB,CAAC,CAAC;EAEjC,MAAMgB,WAAW,GAAG,MAAOC,WAAW,IAAK;IACvCf,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM;QAAEL,IAAI;QAAEqB;MAAM,CAAC,GAAG,MAAMzB,SAAS,CAACwB,WAAW,CAAC;MACpDP,YAAY,CAACS,OAAO,CAAC,OAAO,EAAED,KAAK,CAAC;MACpCnB,OAAO,CAACF,IAAI,CAAC;MACbG,kBAAkB,CAAC,IAAI,CAAC;IAC5B,CAAC,CAAC,OAAOe,GAAG,EAAE;MACVX,QAAQ,CAACW,GAAG,CAAC;IACjB,CAAC,SAAS;MACNb,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAMkB,cAAc,GAAG,MAAOC,QAAQ,IAAK;IACvCnB,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAM;QAAEL,IAAI;QAAEqB;MAAM,CAAC,GAAG,MAAMxB,YAAY,CAAC2B,QAAQ,CAAC;MACpDX,YAAY,CAACS,OAAO,CAAC,OAAO,EAAED,KAAK,CAAC;MACpCnB,OAAO,CAACF,IAAI,CAAC;MACbG,kBAAkB,CAAC,IAAI,CAAC;IAC5B,CAAC,CAAC,OAAOe,GAAG,EAAE;MACVX,QAAQ,CAACW,GAAG,CAAC;IACjB,CAAC,SAAS;MACNb,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,OAAO;IACHD,OAAO;IACPE,KAAK;IACLa,WAAW;IACXI;EACJ,CAAC;AACL,CAAC;AAACxB,EAAA,CAjEID,OAAO;AAmEb,eAAeA,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}