{"ast":null,"code":"var _jsxFileName = \"D:\\\\Docs-MERN\\\\google-docs-clone\\\\frontend\\\\src\\\\components\\\\CollaborativeEditor.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { getDocument, updateDocument } from '../services/documentService';\nimport { useTheme } from '../contexts/ThemeContext';\nimport { useAuth } from '../hooks/useAuth';\nimport useSocket from '../hooks/useSocket';\nimport useAutoSave from '../hooks/useAutoSave';\nimport CollaborativeTextElement from './CollaborativeTextElement';\nimport ImageElement from './ImageElement';\nimport { mergeTextContent, hasConflict } from '../utils/conflictResolution';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CollaborativeEditor = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    isDark\n  } = useTheme();\n  const {\n    user\n  } = useAuth();\n  const [document, setDocument] = useState({\n    title: '',\n    content: []\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [connectedUsers, setConnectedUsers] = useState([]);\n  const [isOnline, setIsOnline] = useState(false);\n  const [lastSavedContent, setLastSavedContent] = useState(null);\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n  const debounceTimeoutRef = useRef(null);\n  const isRemoteChangeRef = useRef(false);\n\n  // Auto-save hook\n  const {\n    forceSave,\n    isSaving\n  } = useAutoSave(id, document, isOnline);\n\n  // Socket connection\n  const {\n    emitDocumentChange,\n    onDocumentChange,\n    onUserJoined,\n    onUserLeft,\n    onUsersInDocument,\n    offDocumentChange,\n    offUserJoined,\n    offUserLeft,\n    offUsersInDocument\n  } = useSocket(id, user === null || user === void 0 ? void 0 : user.id, (user === null || user === void 0 ? void 0 : user.name) || (user === null || user === void 0 ? void 0 : user.username) || 'Anonymous');\n  useEffect(() => {\n    const fetchDocument = async () => {\n      try {\n        const fetchedDocument = await getDocument(id);\n\n        // Normalize content\n        const normalizedContent = Array.isArray(fetchedDocument.content) ? fetchedDocument.content : [{\n          type: 'text',\n          content: fetchedDocument.content || ''\n        }];\n        const documentData = {\n          title: fetchedDocument.title || '',\n          content: normalizedContent\n        };\n        setDocument(documentData);\n        setLastSavedContent(JSON.stringify(documentData));\n        console.log('Fetched document on edit page:', fetchedDocument);\n        setIsOnline(true);\n      } catch (error) {\n        console.error('Error fetching document:', error);\n        setIsOnline(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchDocument();\n  }, [id]);\n\n  // Set up socket event listeners\n  useEffect(() => {\n    if (!user) return;\n\n    // Handle document changes from other users\n    onDocumentChange(({\n      content,\n      userId,\n      userName\n    }) => {\n      if (userId !== user.id) {\n        isRemoteChangeRef.current = true;\n        setDocument(prevDoc => {\n          // Check for conflicts\n          const currentContent = JSON.stringify(prevDoc.content);\n          const remoteContent = JSON.stringify(content);\n          if (hasConflict(currentContent, remoteContent, lastSavedContent)) {\n            console.warn('Conflict detected - merging changes');\n            // In a real app, you'd want better conflict resolution\n            return {\n              ...prevDoc,\n              content\n            };\n          }\n          return {\n            ...prevDoc,\n            content\n          };\n        });\n        console.log(`Document updated by ${userName}`);\n      }\n    });\n\n    // Handle user presence\n    onUserJoined(({\n      userId,\n      userName\n    }) => {\n      setConnectedUsers(prev => {\n        const exists = prev.find(u => u.userId === userId);\n        if (!exists) {\n          return [...prev, {\n            userId,\n            userName\n          }];\n        }\n        return prev;\n      });\n      console.log(`${userName} joined the document`);\n    });\n    onUserLeft(({\n      userId,\n      userName\n    }) => {\n      setConnectedUsers(prev => prev.filter(u => u.userId !== userId));\n      console.log(`${userName} left the document`);\n    });\n    onUsersInDocument(users => {\n      setConnectedUsers(users.filter(u => u.userId !== user.id));\n    });\n\n    // Cleanup\n    return () => {\n      offDocumentChange();\n      offUserJoined();\n      offUserLeft();\n      offUsersInDocument();\n    };\n  }, [user, onDocumentChange, onUserJoined, onUserLeft, onUsersInDocument, offDocumentChange, offUserJoined, offUserLeft, offUsersInDocument]);\n  const handleChange = updatedContent => {\n    setDocument(prevDoc => ({\n      ...prevDoc,\n      content: updatedContent\n    }));\n    setHasUnsavedChanges(true);\n\n    // Don't emit changes if this was triggered by a remote change\n    if (isRemoteChangeRef.current) {\n      isRemoteChangeRef.current = false;\n      return;\n    }\n\n    // Debounce socket emissions to avoid spam\n    if (debounceTimeoutRef.current) {\n      clearTimeout(debounceTimeoutRef.current);\n    }\n    debounceTimeoutRef.current = setTimeout(() => {\n      emitDocumentChange(null, updatedContent);\n    }, 300);\n  };\n  const handleSave = async () => {\n    try {\n      await forceSave();\n      setLastSavedContent(JSON.stringify(document));\n      setHasUnsavedChanges(false);\n      alert('Document saved successfully!');\n    } catch (error) {\n      console.error('Error saving document:', error);\n      alert('Error saving document');\n    }\n  };\n  const handleImageUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Optional: check file size limit (e.g., 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      alert('Image is too large (max 5MB)');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('image', file);\n    try {\n      const res = await fetch('http://localhost:5000/api/upload-image', {\n        method: 'POST',\n        body: formData\n      });\n      const data = await res.json();\n      if (data.imageUrl) {\n        const newImageBlock = {\n          type: 'image',\n          src: data.imageUrl,\n          alt: file.name\n        };\n        const updatedContent = [...document.content, newImageBlock];\n        handleChange(updatedContent);\n      } else {\n        alert('Upload failed. Try again.');\n      }\n    } catch (error) {\n      console.error('Upload error:', error);\n      alert('Something went wrong during upload.');\n    }\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex items-center justify-center min-h-screen ${isDark ? 'text-white' : 'text-gray-800'}`,\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-6 max-w-4xl mx-auto ${isDark ? 'text-white' : 'text-gray-800'}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: `text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-800'}`,\n          children: document.title || 'Untitled Document'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mt-2 space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex items-center space-x-2 ${isOnline ? 'text-green-500' : 'text-red-500'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-2 h-2 rounded-full ${isOnline ? 'bg-green-500' : 'bg-red-500'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: isOnline ? 'Online' : 'Offline'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), connectedUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `text-sm ${isDark ? 'text-gray-300' : 'text-gray-600'}`,\n            children: [connectedUsers.length, \" other\", connectedUsers.length === 1 ? ' user' : ' users', \" editing\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/documents'),\n        className: `text-sm px-3 py-1 rounded transition-colors duration-200 ${isDark ? 'bg-gray-700 hover:bg-gray-600 text-white' : 'bg-gray-300 hover:bg-gray-400 text-gray-800'}`,\n        children: \"Back to List\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this), connectedUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mb-4 p-3 rounded ${isDark ? 'bg-gray-800 border border-gray-700' : 'bg-blue-50 border border-blue-200'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `text-sm font-semibold mb-2 ${isDark ? 'text-white' : 'text-gray-800'}`,\n        children: \"Currently editing:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap gap-2\",\n        children: connectedUsers.map(user => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `px-2 py-1 text-xs rounded-full ${isDark ? 'bg-blue-600 text-white' : 'bg-blue-100 text-blue-800'}`,\n          children: user.userName\n        }, user.userId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mb-4 p-4 rounded ${isDark ? 'bg-gray-800 border border-gray-700' : 'bg-gray-50 border border-gray-200'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: `block font-semibold mb-1 ${isDark ? 'text-white' : 'text-gray-800'}`,\n        children: \"Add Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleImageUpload,\n        className: `block w-full text-sm ${isDark ? 'text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-gray-700 file:text-white hover:file:bg-gray-600' : 'text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: document.content.map((element, index) => {\n        if (element.type === 'text') {\n          return /*#__PURE__*/_jsxDEV(CollaborativeTextElement, {\n            content: element.content,\n            onChange: newContent => {\n              const updatedContent = [...document.content];\n              updatedContent[index].content = newContent;\n              handleChange(updatedContent);\n            },\n            onSelectionChange: selection => {\n              // Handle cursor position changes for collaborative editing\n              if (selection) {\n                // You can emit cursor changes here if needed\n                // emitCursorChange(selection.index, selection);\n              }\n            }\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this);\n        } else if (element.type === 'image') {\n          return /*#__PURE__*/_jsxDEV(ImageElement, {\n            src: element.src,\n            alt: element.alt,\n            onDelete: () => {\n              const updatedContent = document.content.filter((_, i) => i !== index);\n              handleChange(updatedContent);\n            }\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this);\n        }\n        return null;\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        className: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors duration-200\",\n        children: \"Save Document\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n};\n_s(CollaborativeEditor, \"wo8SBeA81yHbTgMN4UY7Xs8+FnE=\", false, function () {\n  return [useParams, useNavigate, useTheme, useAuth, useAutoSave, useSocket];\n});\n_c = CollaborativeEditor;\nexport default CollaborativeEditor;\nvar _c;\n$RefreshReg$(_c, \"CollaborativeEditor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","getDocument","updateDocument","useTheme","useAuth","useSocket","useAutoSave","CollaborativeTextElement","ImageElement","mergeTextContent","hasConflict","jsxDEV","_jsxDEV","CollaborativeEditor","_s","id","navigate","isDark","user","document","setDocument","title","content","isLoading","setIsLoading","connectedUsers","setConnectedUsers","isOnline","setIsOnline","lastSavedContent","setLastSavedContent","hasUnsavedChanges","setHasUnsavedChanges","debounceTimeoutRef","isRemoteChangeRef","forceSave","isSaving","emitDocumentChange","onDocumentChange","onUserJoined","onUserLeft","onUsersInDocument","offDocumentChange","offUserJoined","offUserLeft","offUsersInDocument","name","username","fetchDocument","fetchedDocument","normalizedContent","Array","isArray","type","documentData","JSON","stringify","console","log","error","userId","userName","current","prevDoc","currentContent","remoteContent","warn","prev","exists","find","u","filter","users","handleChange","updatedContent","clearTimeout","setTimeout","handleSave","alert","handleImageUpload","e","file","target","files","size","formData","FormData","append","res","fetch","method","body","data","json","imageUrl","newImageBlock","src","alt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","map","accept","onChange","element","index","newContent","onSelectionChange","selection","onDelete","_","i","_c","$RefreshReg$"],"sources":["D:/Docs-MERN/google-docs-clone/frontend/src/components/CollaborativeEditor.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { getDocument, updateDocument } from '../services/documentService';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport useSocket from '../hooks/useSocket';\r\nimport useAutoSave from '../hooks/useAutoSave';\r\nimport CollaborativeTextElement from './CollaborativeTextElement';\r\nimport ImageElement from './ImageElement';\r\nimport { mergeTextContent, hasConflict } from '../utils/conflictResolution';\r\n\r\nconst CollaborativeEditor = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { isDark } = useTheme();\r\n  const { user } = useAuth();\r\n\r\n  const [document, setDocument] = useState({ title: '', content: [] });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [connectedUsers, setConnectedUsers] = useState([]);\r\n  const [isOnline, setIsOnline] = useState(false);\r\n  const [lastSavedContent, setLastSavedContent] = useState(null);\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  const debounceTimeoutRef = useRef(null);\r\n  const isRemoteChangeRef = useRef(false);\r\n\r\n  // Auto-save hook\r\n  const { forceSave, isSaving } = useAutoSave(id, document, isOnline);\r\n\r\n  // Socket connection\r\n  const {\r\n    emitDocumentChange,\r\n    onDocumentChange,\r\n    onUserJoined,\r\n    onUserLeft,\r\n    onUsersInDocument,\r\n    offDocumentChange,\r\n    offUserJoined,\r\n    offUserLeft,\r\n    offUsersInDocument,\r\n  } = useSocket(id, user?.id, user?.name || user?.username || 'Anonymous');\r\n\r\n  useEffect(() => {\r\n    const fetchDocument = async () => {\r\n      try {\r\n        const fetchedDocument = await getDocument(id);\r\n\r\n        // Normalize content\r\n        const normalizedContent = Array.isArray(fetchedDocument.content)\r\n          ? fetchedDocument.content\r\n          : [{ type: 'text', content: fetchedDocument.content || '' }];\r\n\r\n        const documentData = {\r\n          title: fetchedDocument.title || '',\r\n          content: normalizedContent,\r\n        };\r\n\r\n        setDocument(documentData);\r\n        setLastSavedContent(JSON.stringify(documentData));\r\n\r\n        console.log('Fetched document on edit page:', fetchedDocument);\r\n        setIsOnline(true);\r\n      } catch (error) {\r\n        console.error('Error fetching document:', error);\r\n        setIsOnline(false);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDocument();\r\n  }, [id]);\r\n\r\n  // Set up socket event listeners\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    // Handle document changes from other users\r\n    onDocumentChange(({ content, userId, userName }) => {\r\n      if (userId !== user.id) {\r\n        isRemoteChangeRef.current = true;\r\n        \r\n        setDocument((prevDoc) => {\r\n          // Check for conflicts\r\n          const currentContent = JSON.stringify(prevDoc.content);\r\n          const remoteContent = JSON.stringify(content);\r\n          \r\n          if (hasConflict(currentContent, remoteContent, lastSavedContent)) {\r\n            console.warn('Conflict detected - merging changes');\r\n            // In a real app, you'd want better conflict resolution\r\n            return { ...prevDoc, content };\r\n          }\r\n          \r\n          return { ...prevDoc, content };\r\n        });\r\n        \r\n        console.log(`Document updated by ${userName}`);\r\n      }\r\n    });\r\n\r\n    // Handle user presence\r\n    onUserJoined(({ userId, userName }) => {\r\n      setConnectedUsers((prev) => {\r\n        const exists = prev.find((u) => u.userId === userId);\r\n        if (!exists) {\r\n          return [...prev, { userId, userName }];\r\n        }\r\n        return prev;\r\n      });\r\n      console.log(`${userName} joined the document`);\r\n    });\r\n\r\n    onUserLeft(({ userId, userName }) => {\r\n      setConnectedUsers((prev) => prev.filter((u) => u.userId !== userId));\r\n      console.log(`${userName} left the document`);\r\n    });\r\n\r\n    onUsersInDocument((users) => {\r\n      setConnectedUsers(users.filter((u) => u.userId !== user.id));\r\n    });\r\n\r\n    // Cleanup\r\n    return () => {\r\n      offDocumentChange();\r\n      offUserJoined();\r\n      offUserLeft();\r\n      offUsersInDocument();\r\n    };\r\n  }, [user, onDocumentChange, onUserJoined, onUserLeft, onUsersInDocument, offDocumentChange, offUserJoined, offUserLeft, offUsersInDocument]);\r\n\r\n  const handleChange = (updatedContent) => {\r\n    setDocument((prevDoc) => ({ ...prevDoc, content: updatedContent }));\r\n    setHasUnsavedChanges(true);\r\n\r\n    // Don't emit changes if this was triggered by a remote change\r\n    if (isRemoteChangeRef.current) {\r\n      isRemoteChangeRef.current = false;\r\n      return;\r\n    }\r\n\r\n    // Debounce socket emissions to avoid spam\r\n    if (debounceTimeoutRef.current) {\r\n      clearTimeout(debounceTimeoutRef.current);\r\n    }\r\n\r\n    debounceTimeoutRef.current = setTimeout(() => {\r\n      emitDocumentChange(null, updatedContent);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await forceSave();\r\n      setLastSavedContent(JSON.stringify(document));\r\n      setHasUnsavedChanges(false);\r\n      alert('Document saved successfully!');\r\n    } catch (error) {\r\n      console.error('Error saving document:', error);\r\n      alert('Error saving document');\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Optional: check file size limit (e.g., 5MB)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      alert('Image is too large (max 5MB)');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('image', file);\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/upload-image', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.imageUrl) {\r\n        const newImageBlock = {\r\n          type: 'image',\r\n          src: data.imageUrl,\r\n          alt: file.name,\r\n        };\r\n\r\n        const updatedContent = [...document.content, newImageBlock];\r\n        handleChange(updatedContent);\r\n      } else {\r\n        alert('Upload failed. Try again.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Upload error:', error);\r\n      alert('Something went wrong during upload.');\r\n    }\r\n  };\r\n\r\n  if (isLoading) return (\r\n    <div className={`flex items-center justify-center min-h-screen ${isDark ? 'text-white' : 'text-gray-800'}`}>\r\n      Loading...\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className={`p-6 max-w-4xl mx-auto ${isDark ? 'text-white' : 'text-gray-800'}`}>\r\n      {/* Header with title and status */}\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <div>\r\n          <h1 className={`text-2xl font-bold ${isDark ? 'text-white' : 'text-gray-800'}`}>\r\n            {document.title || 'Untitled Document'}\r\n          </h1>\r\n          <div className=\"flex items-center mt-2 space-x-4\">\r\n            <div className={`flex items-center space-x-2 ${isOnline ? 'text-green-500' : 'text-red-500'}`}>\r\n              <div className={`w-2 h-2 rounded-full ${isOnline ? 'bg-green-500' : 'bg-red-500'}`}></div>\r\n              <span className=\"text-sm\">{isOnline ? 'Online' : 'Offline'}</span>\r\n            </div>\r\n            {connectedUsers.length > 0 && (\r\n              <div className={`text-sm ${isDark ? 'text-gray-300' : 'text-gray-600'}`}>\r\n                {connectedUsers.length} other{connectedUsers.length === 1 ? ' user' : ' users'} editing\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={() => navigate('/documents')}\r\n          className={`text-sm px-3 py-1 rounded transition-colors duration-200 ${\r\n            isDark \r\n              ? 'bg-gray-700 hover:bg-gray-600 text-white' \r\n              : 'bg-gray-300 hover:bg-gray-400 text-gray-800'\r\n          }`}\r\n        >\r\n          Back to List\r\n        </button>\r\n      </div>\r\n\r\n      {/* Connected Users */}\r\n      {connectedUsers.length > 0 && (\r\n        <div className={`mb-4 p-3 rounded ${isDark ? 'bg-gray-800 border border-gray-700' : 'bg-blue-50 border border-blue-200'}`}>\r\n          <div className={`text-sm font-semibold mb-2 ${isDark ? 'text-white' : 'text-gray-800'}`}>\r\n            Currently editing:\r\n          </div>\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            {connectedUsers.map((user) => (\r\n              <span\r\n                key={user.userId}\r\n                className={`px-2 py-1 text-xs rounded-full ${\r\n                  isDark \r\n                    ? 'bg-blue-600 text-white' \r\n                    : 'bg-blue-100 text-blue-800'\r\n                }`}\r\n              >\r\n                {user.userName}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Image Upload */}\r\n      <div className={`mb-4 p-4 rounded ${isDark ? 'bg-gray-800 border border-gray-700' : 'bg-gray-50 border border-gray-200'}`}>\r\n        <label className={`block font-semibold mb-1 ${isDark ? 'text-white' : 'text-gray-800'}`}>Add Image</label>\r\n        <input \r\n          type=\"file\" \r\n          accept=\"image/*\" \r\n          onChange={handleImageUpload}\r\n          className={`block w-full text-sm ${\r\n            isDark \r\n              ? 'text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-gray-700 file:text-white hover:file:bg-gray-600' \r\n              : 'text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100'\r\n          }`}\r\n        />\r\n      </div>\r\n\r\n      {/* Document Content */}\r\n      <div className=\"space-y-4\">\r\n        {document.content.map((element, index) => {\r\n          if (element.type === 'text') {\r\n            return (\r\n              <CollaborativeTextElement\r\n                key={index}\r\n                content={element.content}\r\n                onChange={(newContent) => {\r\n                  const updatedContent = [...document.content];\r\n                  updatedContent[index].content = newContent;\r\n                  handleChange(updatedContent);\r\n                }}\r\n                onSelectionChange={(selection) => {\r\n                  // Handle cursor position changes for collaborative editing\r\n                  if (selection) {\r\n                    // You can emit cursor changes here if needed\r\n                    // emitCursorChange(selection.index, selection);\r\n                  }\r\n                }}\r\n              />\r\n            );\r\n          } else if (element.type === 'image') {\r\n            return (\r\n              <ImageElement\r\n                key={index}\r\n                src={element.src}\r\n                alt={element.alt}\r\n                onDelete={() => {\r\n                  const updatedContent = document.content.filter((_, i) => i !== index);\r\n                  handleChange(updatedContent);\r\n                }}\r\n              />\r\n            );\r\n          }\r\n          return null;\r\n        })}\r\n      </div>\r\n\r\n      {/* Save Button */}\r\n      <div className=\"mt-6\">\r\n        <button\r\n          onClick={handleSave}\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors duration-200\"\r\n        >\r\n          Save Document\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollaborativeEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}